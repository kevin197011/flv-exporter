spring:
  application:
    name: flv-exporter

# Docker环境特定配置
logging:
  level:
    io.github.devops.flvexporter: INFO
    org.springframework: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: /app/logs/flv-exporter.log

# Prometheus metrics endpoint
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    prometheus:
      access: unrestricted
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true
  metrics:
    enable:
      # 禁用所有默认指标
      jvm: false
      system: false
      process: false
      http: false
      tomcat: false
      logback: false
      hikaricp: false
      jdbc: false
    export:
      prometheus:
        enabled: true
  server:
    port: 8080

# FLV检测配置 - Docker环境优化
flv:
  check:
    interval: 30000  # 检测间隔(毫秒)
    timeout: 15000   # Docker环境增加超时时间
    threads: 20      # Docker环境增加并发数
    retries: 3       # 失败重试次数
  urls:
    demo:
      - https://sample-videos.com/zip/10/flv/SampleVideo_1280x720_1mb.flv
      - https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-flv-file.flv
      - https://file-examples.com/storage/fe68c9fa7d66f447a9c5f83/2017/10/file_example_FLV_1280_1_4MB.flv
    test:
      - https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.flv
      - https://media.w3.org/2010/05/sintel/trailer.flv
      - https://download.blender.org/peach/bigbuckbunny_movies/big_buck_bunny_480p_surround-fix.flv
    live:
      - https://vjs.zencdn.net/v/oceans.flv
      - https://www.html5rocks.com/en/tutorials/video/basics/devstories.flv
      - https://techslides.com/demos/sample-videos/small.flv